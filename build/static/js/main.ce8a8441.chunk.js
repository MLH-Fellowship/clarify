(this["webpackJsonpdouble-check"]=this["webpackJsonpdouble-check"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(19),l=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=a(24),c=a(50),s=a(13),u=a(14),m=a(15),d=a(16),h=a(31),f=a.n(h),b=f.a.initializeApp({apiKey:"AIzaSyCXZ3IgNwq1vczQYOoL_c0cph91RXxnKTw",authDomain:"testing-500d7.firebaseapp.com",databaseURL:"https://testing-500d7.firebaseio.com",projectId:"testing-500d7",storageBucket:"testing-500d7.appspot.com",messagingSenderId:"583234649390",appId:"1:583234649390:web:ecfdc4fc6ee257162b8ebf",measurementId:"G-X522CEBVVE"}),p=b.firestore(),v=b.auth(),g=f.a.firestore.FieldValue.increment(1),y=f.a.firestore.FieldValue.increment(-1),E=a(64),k=(a(88),a(3)),S="questions";function O(){var e=Object(k.f)().id;return S=e," "}var j,C=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e,n){var o;return Object(s.a)(this,a),(o=t.call(this)).addQuestion=function(){var e=Object(c.a)({},o.state.formValues,{uid:o.state.formValues.question});console.log(e),p.collection(S).doc(e.uid.toString()).set(e).then((function(){r.NotificationManager.success("A new question has been asked","Success"),o.setState({isSubmitting:!1}),o.getLatestSnapshot()})).catch((function(e){r.NotificationManager.error(e.message,"Addition of question failed"),o.setState({isSubmitting:!1})}))},o.handleSubmit=function(e){e.preventDefault(),o.setState({isSubmitting:!0});var t=o.state,a=t.formValues,n=t.formValidity;if(Object.values(n).every(Boolean))o.addQuestion(),o.setState({asking:!1}),console.log("not asking");else{for(var i in a){var l={name:i,value:a[i]};o.handleValidation(l)}r.NotificationManager.error("Please check on the validation message below form fields","Validation error"),o.setState({isSubmitting:!1})}},o.handleChange=function(e){var t=e.target,a=o.state.formValues;a[t.name]=t.value,o.setState({formValues:a}),o.handleValidation(t)},o.handleValidation=function(e){var t=e.name,a=e.value,n=o.state.formErrors,i=o.state.formValidity;"image"===t||(i[t]=a.length>0,n[t]=i[t]?"":"".concat(t," is required and cannot be empty")),o.setState({formErrors:n,formValidity:i})},o.state={asking:!1,questions:[],formValues:{user:"",question:""},formErrors:{user:"",question:""},formValidity:{user:!1,question:!1},isSubmitting:!1},o}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getLatestSnapshot()}},{key:"getLatestSnapshot",value:function(){var e=this;p.collection(S).onSnapshot((function(t){var a=t.docs.map((function(e){return e.data()}));console.log(a),e.setState({questions:a})}))}},{key:"handleClick",value:function(e){var t=this;p.collection(S).doc(e).delete().then((function(){console.log("Document successfully deleted!"),t.getLatestSnapshot()})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"handleAsk",value:function(){this.setState({asking:!0})}},{key:"handleCancel",value:function(){this.setState({asking:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.asking,n=t.questions,i=t.formValues,l=t.formErrors,r=t.isSubmitting;return console.log(n),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"row"},n.map((function(t){return o.a.createElement("div",{key:t.uid,className:"questionCard"},o.a.createElement("div",{className:"card-body",style:{margin:1}},o.a.createElement("h5",null,t.user),o.a.createElement("h6",null,t.question),o.a.createElement(E.a,{variant:"outlined",color:"primary",onClick:e.handleClick.bind(e,t.question)},"Resolve")))}))),o.a.createElement("div",{className:"row mb-5"},o.a.createElement("div",{className:"col-lg-12 text-center"},o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",style:{marginTop:"10px"},disabled:r,onClick:this.handleAsk.bind(this)},"Ask something!"),!0===a?o.a.createElement("span",null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Your name"),o.a.createElement("input",{type:"text",name:"user",className:"form-control ".concat(l.user?"is-invalid":""),placeholder:"Enter your name",onChange:this.handleChange,value:i.user}),o.a.createElement("div",{className:"invalid-feedback"},l.name)),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Question"),o.a.createElement("input",{type:"text",name:"question",className:"form-control ".concat(l.question?"is-invalid":""),placeholder:"Enter your question",onChange:this.handleChange,value:i.question}),o.a.createElement("div",{className:"invalid-feedback"},l.question)),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:r,onClick:this.handleSubmit.bind(this)},r?"Please wait...":"Submit"),o.a.createElement("button",{type:"cancel",className:"btn btn-primary btn-block",disabled:r,onClick:this.handleCancel.bind(this)},"Cancel"))))):null)),o.a.createElement(k.a,{path:"/:id"},o.a.createElement(O,null)))}}]),a}(o.a.Component),x=a(39),N=a(105),q=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(N.a.Button,{value:e.text,buttonStyle:"solid",style:{minWidth:"80px",textAlign:"center",fontSize:"18px",backgroundColor:e.color}},e.text))},w=a(29),V=a(30),A=a.n(V),R=a(63),F=a.n(R),M=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).chartRef=o.a.createRef(),e.buildChart=function(){var t=e.chartRef.current.getContext("2d");j&&j.destroy();var a=e.props.labels,n=e.props.data.map((function(e){return Object(w.a)({},e.name,e.count)}));n.sort((function(e,t){return a.indexOf(Object.keys(e)[0])-a.indexOf(Object.keys(t)[0])}));var o=(n=n.map((function(e){return Object.values(e)[0]}))).map((function(e){return"#48b2ff"}));A.a.defaults.global.defaultFontSize=14,j=new A.a(t,{plugins:[F.a],type:"bar",response:!0,maintainAspectRatio:!1,data:{labels:a,datasets:[{label:"# votes",data:n,backgroundColor:o,borderWidth:0}]},options:{plugins:{datalabels:{anchor:"end",align:"end",offset:"6",color:"#48b2ff"}},legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1},ticks:{display:!1}}],yAxes:[{gridLines:{display:!1,drawBorder:!0},ticks:{display:!1,beginAtZero:!0,suggestedMax:50}}]},animation:{duration:0}}})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.buildChart()}},{key:"componentDidUpdate",value:function(){this.buildChart()}},{key:"render",value:function(){return o.a.createElement("canvas",{id:"myChart",ref:this.chartRef})}}]),a}(o.a.Component),D="poll";var I=function(e){var t=["\ud83d\ude33","\ud83d\ude15","\ud83d\ude42","\ud83d\ude01"],a=t[2],i=Object(n.useState)([]),l=Object(x.a)(i,2),r=l[0],c=l[1],s=Object(n.useState)(a),u=Object(x.a)(s,2),m=u[0],d=u[1];window.onbeforeunload=function(){p.collection(D).doc(m).update({count:y})},Object(n.useEffect)((function(){if(p.collection(D))return p.collection(D).doc(a).update({count:g}),p.collection(D).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push({name:e.id,count:e.data().count})})),c(t)}))}),[a]);var h=t.map((function(e){return o.a.createElement(q,{text:e,color:e===m?"#2190e0":"#f0f0f0"})}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{data:r,labels:t}),o.a.createElement(N.a.Group,{onChange:function(e){p.collection(D).doc(e.target.value).update({count:g}),p.collection(D).doc(m).update({count:y}),d(e.target.value)},defaultValue:a,size:"medium",style:{margin:30}},h))},L=(a(45),a(46),a(47),a(48),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.StrictMode,null,o.a.createElement("h1",{style:{padding:25}},"clarify"),o.a.createElement("div",{id:"flexbox"},o.a.createElement("div",{class:"questions"},o.a.createElement(C,null)),o.a.createElement("div",{class:"poll"},o.a.createElement(I,null))))}}]),a}(o.a.Component)),B=a(23),z=(a(49),a(25));v.onAuthStateChanged((function(e){if(e){e.uid;console.log(e.uid)}}));var Q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleChange=n.handleChange.bind(Object(z.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(z.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.state.value;return v.signInAnonymously(),this.props.history.push("".concat(t))}},{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,o.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(o.a.Component),W=Object(k.g)(Q);var J=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"submitForm",value:function(e){e.preventDefault();var t=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*a));return e}();return p.collection(t).doc("poll").set({happy:0,okay:10,sad:13}),p.collection(t).doc("q1").set({text:"Sample Question",upvotes:5}),this.props.history.push("".concat(t))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.submitForm.bind(this)},o.a.createElement("button",{type:"submit"},"Submit")))}}]),a}(n.Component),X=Object(k.g)(J),G=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"submitForm",value:function(e){e.preventDefault(),this.props.history.push("/thank-you")}},{key:"render",value:function(){return o.a.createElement("div",{className:"home"},o.a.createElement("div",{className:"join"},o.a.createElement("h2",null," Join Room "),o.a.createElement(W,null)),o.a.createElement("div",{className:"create"},o.a.createElement("h2",null," Create Room "),o.a.createElement(W,null),o.a.createElement(X,null)))}}]),a}(o.a.Component);var K=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(B.a,null,o.a.createElement(k.c,null,o.a.createElement(k.a,{path:"/",exact:!0,component:function(){return o.a.createElement(G,null)}}),o.a.createElement(k.a,{path:"/:id",children:o.a.createElement(L,null)}))))};l.a.render(o.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){},49:function(e,t,a){},68:function(e,t,a){e.exports=a(103)},88:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.ce8a8441.chunk.js.map